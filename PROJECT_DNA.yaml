# Oktyv Project DNA
# Version: 0.3.0-alpha.1
# Created: 2026-01-22
# Updated: 2026-01-25
# Philosophy: Option B Perfection - Do It Right First Time

identity:
  name: "Oktyv"
  tagline: "Universal automation layer - The hands of AI agents"
  purpose: |
    Complete automation infrastructure with 7 core engines enabling AI agents to ACT
    on the real world. Browser, API, Database, Email, File, Cron, and Credential Vault
    engines provide comprehensive automation across all domains. Oktyv is the execution
    layer for the entire product ecosystem.
  philosophy: |
    Option B Perfection - Build complete product first time, not MVP iterations.
    Foundation Out - Build backend infrastructure before surface features.
    Zero Technical Debt - No mocks, stubs, or temporary solutions.
    Cognitive Monopoly - Context and intelligence as competitive advantage.
    Lean Infrastructure - Use existing tools, build only what's unique.

current_state:
  version: "0.3.0-alpha.1"
  status: "Browser + Vault Engines complete, 5 engines remaining"
  build: "âœ… Passing (82/82 tests, CI/CD operational)"
  health:
    build: "âœ… TypeScript compilation clean"
    tests: "âœ… 82 tests passing (100% pass rate)"
    ci_cd: "âœ… GitHub Actions operational"
    docs: "âœ… Comprehensive documentation"
  
  completed_engines:
    browser:
      status: "âœ… COMPLETE"
      capabilities:
        - "Puppeteer integration"
        - "Session management (cookie persistence)"
        - "LinkedIn connector (search, jobs, companies)"
        - "Indeed connector (search, jobs, companies)"
        - "Wellfound connector (search, jobs, companies)"
        - "Generic browser tools (navigate, click, type, extract, screenshot, PDF, fillForm)"
        - "Rate limiting (token bucket algorithm)"
        - "Error recovery and retry logic"
        - "Stealth mode (anti-bot detection)"
      tests: "29 connector tests + 23 parameter validation tests"
      
    vault:
      status: "âœ… COMPLETE"
      capabilities:
        - "AES-256-GCM encryption (authenticated encryption)"
        - "OS keychain integration (macOS Keychain, Windows Credential Manager, Linux Secret Service)"
        - "Master key management (@napi-rs/keyring)"
        - "Encrypted JSON file storage (~/.oktyv/vaults/*.vault)"
        - "Security audit logging (~/.oktyv/logs/vault-audit.log)"
        - "Complete CRUD operations (set, get, list, delete)"
        - "Multi-vault support"
        - "Non-deterministic encryption (unique IV per encryption)"
        - "Tamper detection (authentication tags)"
      tests: "8 crypto tests + 14 integration tests"
      implementation:
        crypto: "src/tools/vault/crypto.ts"
        keychain: "src/tools/vault/KeychainAdapter.ts"
        storage: "src/tools/vault/VaultStorage.ts"
        audit: "src/tools/vault/AuditLogger.ts"
        engine: "src/tools/vault/VaultEngine.ts"
        tools: "src/tools/vault/tools.ts"
        
  remaining_engines:
    api:
      status: "ðŸ”² NOT STARTED"
      capabilities:
        - "HTTP/REST/GraphQL client"
        - "OAuth 2.0 flows (Google, GitHub, Stripe, etc.)"
        - "Auto-pagination handling"
        - "Response parsing (JSON, XML)"
        - "Per-endpoint rate limiting"
        - "Webhook management"
        
    database:
      status: "ðŸ”² NOT STARTED"
      capabilities:
        - "Prisma integration"
        - "PostgreSQL, MySQL, SQLite support"
        - "MongoDB (NoSQL) support"
        - "Transaction handling"
        - "Backup/restore utilities"
        - "Migration runner"
        
    email:
      status: "ðŸ”² NOT STARTED"
      capabilities:
        - "Nodemailer integration"
        - "Gmail/Outlook (OAuth + SMTP)"
        - "Inbox search and parsing (IMAP)"
        - "Attachment handling"
        - "Template rendering"
        - "Bulk operations"
        
    file:
      status: "ðŸ”² NOT STARTED"
      capabilities:
        - "Local file operations (CRUD)"
        - "Cloud storage (S3, Google Drive, Dropbox)"
        - "Format conversion (PDF, DOCX, XLSX, CSV, JSON)"
        - "Archive operations (ZIP, TAR)"
        - "File watching (monitor changes)"
        - "Encryption/decryption"
        
    cron:
      status: "ðŸ”² NOT STARTED"
      capabilities:
        - "node-cron integration"
        - "Cron syntax + natural language scheduling"
        - "Recurring and one-time tasks"
        - "Task persistence (survives restarts)"
        - "Job history and logs"
        - "Error handling and retries"
        - "AES-256 encryption"
        - "OS keychain integration (macOS Keychain, Windows Credential Manager, Linux Secret Service)"
        - "Secure credential storage/retrieval"
        - "Multiple vault support"
        - "Export/import (encrypted)"
        - "Access logging (audit trail)"

architecture:
  type: "Standalone MCP Server"
  runtime: "Node.js 18+"
  language: "TypeScript 5.x (strict mode)"
  primary_dependencies:
    - "@modelcontextprotocol/sdk ^1.0.4"
    - "puppeteer ^23.10.4"
    - "winston ^3.17.0"
    - "zod ^3.24.1"
  deployment: "Local stdio (Claude Desktop config)"
  
  supporting_infrastructure:
    - "Rate limiter (global + per-endpoint)"
    - "Retry manager (exponential backoff + circuit breakers)"
    - "Session manager (persist state across restarts)"
    - "Audit logger (structured logging with Winston)"
  
boundaries:
  complete_scope:
    - "âœ… Browser Engine (Puppeteer automation)"
    - "ðŸ”² API Engine (HTTP/REST/GraphQL orchestration)"
    - "ðŸ”² Database Engine (SQL/NoSQL operations)"
    - "ðŸ”² Email Engine (send/receive/parse)"
    - "ðŸ”² File Engine (local + cloud storage)"
    - "ðŸ”² Cron Engine (scheduled automation)"
    - "ðŸ”² Vault Engine (encrypted credential storage)"
    
  does:
    - "Universal automation across all 7 engines"
    - "Session persistence across restarts"
    - "Platform-specific connectors (LinkedIn, Indeed, Wellfound, etc.)"
    - "Rate limiting per platform/engine"
    - "Error recovery and retry logic"
    - "Multi-engine workflow orchestration (future)"
    
  does_not:
    - "Store user credentials in plain text"
    - "Manage application state (that's GREGORE)"
    - "Provide AI analysis (that's Claude's job)"
    - "Replace domain-specific systems"
    - "Bundle as KERNL plugin (standalone MCP server)"
    - "Run as browser extension"

interfaces:
  - workspace: "Any MCP Client"
    relationship: "Universal automation provider"
    connection: "MCP protocol via Claude Desktop or API"
    data_flow: "Oktyv â†’ Claude â†’ Client application"
    
  - workspace: "KERNL"
    relationship: "Development tooling"
    connection: "Session management, file operations"
    data_flow: "KERNL manages Oktyv development"
    
  - workspace: "GREGORE"
    relationship: "Automation execution layer"
    connection: "GREGORE orchestrates, Oktyv executes"
    data_flow: "GREGORE â†’ Oktyv (all 7 engines)"

key_decisions:
  - date: "2026-01-22"
    decision: "Standalone MCP server, not KERNL plugin"
    rationale: |
      - Single responsibility (automation only)
      - Easier to test in isolation
      - Large dependencies (Puppeteer ~300MB, future engines add more)
      - Usable beyond any single product
      - Simpler deployment and versioning
      
  - date: "2026-01-22"
    decision: "Puppeteer over Playwright"
    rationale: |
      - Simpler API for MCP use case
      - Smaller footprint
      - Better Node.js integration
      - Sufficient for current platforms
      - Can migrate if multi-browser needed
      
  - date: "2026-01-22"
    decision: "Cookie-based session persistence"
    rationale: |
      - User stays logged in across invocations
      - No credential management needed (until Vault Engine)
      - Mirrors real browser behavior
      - Respects platform security
      
  - date: "2026-01-22"
    decision: "Platform-agnostic canonical data schema"
    rationale: |
      - Products independent of platform specifics
      - Easy to add new platforms
      - Consistent Claude experience
      - Future-proof design
      
  - date: "2026-01-24"
    decision: "7-engine complete product scope"
    rationale: |
      - Matches VISION.md specification
      - Browser Engine alone is incomplete product
      - All 7 engines required for "universal automation layer"
      - MVP approach rejected (Option B Perfection philosophy)
      - Build complete product, ship when ready

naming:
  etymology: |
    "Oktyv" combines "oct" (eight, suggesting completeness) with modern tech aesthetic.
    Represents complete automation across all domains.
  alternatives_rejected:
    - "Autopilot" (renamed from original concept)
    - "Fetch" (unicorn company $2.5B conflict)
    - "Invoke" (multiple established companies)
    - "Argus" (major real estate software $143M raised)
  availability: "Clean - zero conflicts found"

performance_targets:
  browser_engine:
    tool_latency: "<500ms (excluding browser render)"
    linkedin_search: "<3s for 10 results"
    job_detail_fetch: "<2s per job"
    memory_usage: "<500MB per browser instance"
    concurrent_sessions: "1-3 browsers"
    
  other_engines:
    api_latency: "<200ms per request"
    database_query: "<50ms per query"
    file_operations: "<100ms per operation"
    vault_operations: "<50ms per operation"

build_plan:
  current_phase:
    name: "Phase 1: Browser Engine"
    status: "âœ… COMPLETE"
    deliverables:
      - "âœ… MCP server scaffolding"
      - "âœ… Puppeteer integration"
      - "âœ… Session management (cookies)"
      - "âœ… LinkedIn connector (search, jobs, company)"
      - "âœ… Indeed connector (search, jobs, company)"
      - "âœ… Wellfound connector (search, jobs, company)"
      - "âœ… Generic browser tools (navigate, click, type, extract, screenshot, PDF, fillForm)"
      - "âœ… Rate limiting (token bucket)"
      - "âœ… Error handling and retry system"
      - "âœ… Git repository and GitHub remote"
      - "âœ… Comprehensive test suite (52 tests, 100% passing)"
      - "âœ… CI/CD automation (GitHub Actions)"
      - "âœ… Complete documentation"
      
  next_phases:
    phase_2_api_engine:
      status: "ðŸ”² NOT STARTED"
      priority: "HIGH"
      deliverables:
        - "Universal HTTP/REST client"
        - "OAuth 2.0 flows (Google, GitHub, Stripe, etc.)"
        - "Auto-pagination handling"
        - "GraphQL support"
        - "Per-endpoint rate limiting"
        - "Webhook management"
        - "Test suite for API tools"
        
    phase_3_database_engine:
      status: "ðŸ”² NOT STARTED"
      priority: "HIGH"
      deliverables:
        - "Prisma integration"
        - "PostgreSQL, MySQL, SQLite support"
        - "MongoDB (NoSQL) support"
        - "Transaction handling"
        - "Backup/restore utilities"
        - "Migration runner"
        - "Test suite for database tools"
        
    phase_4_email_engine:
      status: "ðŸ”² NOT STARTED"
      priority: "MEDIUM"
      deliverables:
        - "Nodemailer integration"
        - "Gmail/Outlook SMTP"
        - "Inbox search and parsing"
        - "Attachment handling"
        - "Template rendering"
        - "Bulk operations"
        - "Test suite for email tools"
        
    phase_5_file_engine:
      status: "ðŸ”² NOT STARTED"
      priority: "MEDIUM"
      deliverables:
        - "Local file operations"
        - "S3, Google Drive, Dropbox integration"
        - "Format conversion (PDF, DOCX, XLSX, CSV)"
        - "Archive operations (ZIP, TAR)"
        - "File watching"
        - "Encryption/decryption"
        - "Test suite for file tools"
        
    phase_6_cron_engine:
      status: "ðŸ”² NOT STARTED"
      priority: "MEDIUM"
      deliverables:
        - "node-cron integration"
        - "Cron syntax support"
        - "Natural language scheduling"
        - "Task persistence"
        - "Job history and logs"
        - "Error handling and retries"
        - "Test suite for cron tools"
        
    phase_7_vault_engine:
      status: "ðŸ”² NOT STARTED"
      priority: "HIGH"
      deliverables:
        - "AES-256 encryption"
        - "OS keychain integration"
        - "Secure storage/retrieval"
        - "Multiple vault support"
        - "Export/import (encrypted)"
        - "Access logging"
        - "Test suite for vault tools"
        
    phase_8_orchestration:
      status: "ðŸ”² NOT STARTED"
      priority: "LOW"
      deliverables:
        - "Multi-engine workflows"
        - "Conditional logic"
        - "Error recovery"
        - "Parallel execution"
        - "Workflow templates"
        - "Monitoring/observability"

scope_agreement:
  complete_product:
    description: "7 complete engines as specified in VISION.md"
    engines:
      - "Browser Engine âœ…"
      - "API Engine ðŸ”²"
      - "Database Engine ðŸ”²"
      - "Email Engine ðŸ”²"
      - "File Engine ðŸ”²"
      - "Cron Engine ðŸ”²"
      - "Vault Engine ðŸ”²"
    
  current_status: "1 of 7 engines complete (Browser Engine)"
  completion_criteria: "All 7 engines implemented, tested, and documented"
  
  next_instance_instructions: |
    When resuming Oktyv development:
    1. Browser Engine is COMPLETE (do not rebuild)
    2. Goal is ALL 7 ENGINES (universal automation layer)
    3. Next engine to build: API, Database, or Vault (user decides priority)
    4. Each engine needs: implementation + tests + docs + CI/CD
    5. No time estimates - build until complete
    6. Follow Option B Perfection (zero technical debt)

meta:
  created: "2026-01-22T08:11:44Z"
  last_updated: "2026-01-24T21:10:00Z"
  author: "David Kirsch"
  workspace_id: "oktyv"
  workspace_group: "standalone"
  version_history:
    - "0.1.0-alpha.1: Initial browser engine"
    - "0.2.0-alpha.2: Browser engine complete + test infrastructure + CI/CD"
