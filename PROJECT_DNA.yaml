# Oktyv Project DNA
# Version: 1.1.0
# Created: 2026-01-22
# Updated: 2026-01-29
# Philosophy: Option B Perfection - Do It Right First Time

identity:
  name: "Oktyv"
  tagline: "Universal automation layer - The hands of AI agents"
  purpose: |
    Complete automation infrastructure with 8 engines enabling AI agents to ACT
    on the real world. Browser, API, Database, Email, File, Cron, Vault, and 
    Parallel Execution engines provide comprehensive automation across all domains. 
    Oktyv is the execution layer for the entire product ecosystem.
  philosophy: |
    Option B Perfection - Build complete product first time, not MVP iterations.
    Foundation Out - Build backend infrastructure before surface features.
    Zero Technical Debt - No mocks, stubs, or temporary solutions.
    Cognitive Monopoly - Context and intelligence as competitive advantage.
    Lean Infrastructure - Use existing tools, build only what's unique.

current_state:
  version: "1.1.0"
  status: "PRODUCTION READY - All 8 engines complete with parallel execution"
  build: "✅ Passing (258/258 tests, CI/CD operational, production hardening complete)"
  health:
    build: "✅ TypeScript compilation clean"
    tests: "✅ 258 tests passing (100% pass rate)"
    ci_cd: "✅ GitHub Actions operational"
    docs: "✅ Comprehensive documentation"
    production: "✅ Load testing, security audit, performance optimization, monitoring, error recovery"
  
  completed_engines:
    browser:
      status: "✅ PRODUCTION"
      tests: "60 tests"
      capabilities:
        - "Puppeteer integration with session management"
        - "LinkedIn, Indeed, Wellfound connectors"
        - "Generic browser automation (navigate, click, type, extract, screenshot, PDF, forms)"
        - "Rate limiting with token bucket algorithm"
        - "Error recovery and retry logic"
        - "Stealth mode (anti-bot detection)"
      
    vault:
      status: "✅ PRODUCTION"
      tests: "22 tests"
      capabilities:
        - "AES-256-GCM authenticated encryption"
        - "OS keychain integration (macOS/Windows/Linux)"
        - "Master key management via @napi-rs/keyring"
        - "Encrypted JSON file storage"
        - "Security audit logging"
        - "Multi-vault support with tamper detection"
    
    api:
      status: "✅ PRODUCTION"
      tests: "41 tests"
      capabilities:
        - "Universal HTTP client (GET, POST, PUT, PATCH, DELETE)"
        - "Exponential backoff retry with circuit breaker"
        - "Multi-format parsing (JSON, XML, HTML, Text, Binary)"
        - "Token bucket rate limiting (per-endpoint + global)"
        - "Auto-pagination (cursor, offset/limit, page number, Link headers)"
        - "OAuth 2.0 flows with PKCE"
        - "Provider templates (Google, GitHub, Stripe, Slack)"
        - "Automatic token refresh"
        
    database:
      status: "✅ PRODUCTION"
      tests: "28 tests"
      capabilities:
        - "PostgreSQL, MySQL, SQLite, MongoDB support"
        - "Connection pooling with credential management"
        - "Transaction handling with isolation levels"
        - "Prepared statements (SQL injection prevention)"
        - "Bulk operations and aggregations"
        - "Raw query support"
        
    email:
      status: "✅ PRODUCTION"
      tests: "38 tests"
      capabilities:
        - "Gmail OAuth integration via Google APIs"
        - "SMTP email sending via nodemailer"
        - "IMAP email receiving via imap-simple"
        - "Email parsing (from, to, subject, body, attachments)"
        - "HTML/plain text support"
        - "Attachment handling (send/receive)"
        - "Mailbox filtering and search"
        
    file:
      status: "✅ PRODUCTION"
      tests: "45 tests"
      capabilities:
        - "Local operations (read, write, copy, move, delete, list)"
        - "File hashing (MD5, SHA1, SHA256, SHA512)"
        - "Archive operations (create/extract ZIP, TAR, TAR.GZ)"
        - "File watching with real-time monitoring"
        - "S3 integration (upload/download/list with multipart support)"
        - "Batch operations with parallel execution and concurrency control"
        - "Streaming for large files"
        
    cron:
      status: "✅ PRODUCTION"
      tests: "27 tests"
      capabilities:
        - "Cron expression scheduling (5-field standard)"
        - "Interval-based scheduling (milliseconds)"
        - "One-time scheduled tasks"
        - "Timezone support"
        - "Automatic retry with configurable delays"
        - "Execution timeout management"
        - "Comprehensive execution history"
        - "Task statistics (success rate, avg duration)"
        - "Multi-action support (HTTP, webhook, file, database, email)"
        
    parallel_execution:
      status: "✅ PRODUCTION"
      tests: "258 tests (comprehensive DAG and concurrency testing)"
      capabilities:
        - "DAG-based concurrent execution (2+ tasks simultaneously)"
        - "Intelligent dependency management (A → B → C)"
        - "Variable substitution across tasks (${taskId.result.field})"
        - "Circular dependency detection and prevention"
        - "Configurable concurrency limits (1-100 concurrent tasks)"
        - "Partial failure handling (continue/stop modes)"
        - "Retry policies per task"
        - "Timeout management (per-task and overall)"
        - "Level-by-level execution (independent tasks run simultaneously)"
        - "Event emission for monitoring and debugging"
      performance:
        - "10x faster than sequential for independent tasks"
        - "3x faster for multi-platform job searches"
        - "DAG construction: <1ms per task"
        - "Variable resolution: <1ms per substitution"
        - "Level coordination: <5ms per level"

architecture:
  type: "Standalone MCP Server"
  runtime: "Node.js 20+"
  language: "TypeScript 5.7+ (strict mode)"
  primary_dependencies:
    - "@modelcontextprotocol/sdk ^1.0.4"
    - "puppeteer ^23.10.4"
    - "winston ^3.17.0"
    - "zod ^3.24.1"
  deployment: "Local stdio (Claude Desktop config)"
  
  supporting_infrastructure:
    - "Rate limiter (global + per-endpoint)"
    - "Retry manager (exponential backoff + circuit breakers)"
    - "Session manager (persist state across restarts)"
    - "Audit logger (structured logging with Winston)"
    - "DAG builder (topological sorting, cycle detection)"
    - "Parallel execution engine (level-based orchestration)"
    - "Tool registry (71 tools for parallel execution)"
  
boundaries:
  complete_scope:
    - "✅ Browser Engine (Puppeteer automation)"
    - "✅ API Engine (HTTP/REST/GraphQL orchestration)"
    - "✅ Database Engine (SQL/NoSQL operations)"
    - "✅ Email Engine (send/receive/parse)"
    - "✅ File Engine (local + cloud storage)"
    - "✅ Cron Engine (scheduled automation)"
    - "✅ Vault Engine (encrypted credential storage)"
    - "✅ Parallel Execution Engine (DAG-based concurrency)"
    
  does:
    - "Universal automation across all 8 engines"
    - "Session persistence across restarts"
    - "Platform-specific connectors (LinkedIn, Indeed, Wellfound)"
    - "Rate limiting per platform/engine"
    - "Error recovery and retry logic"
    - "Multi-engine workflow orchestration with parallel execution"
    - "Production-ready with comprehensive hardening"
    
  does_not:
    - "Store user credentials in plain text"
    - "Manage application state (that's GREGORE)"
    - "Provide AI analysis (that's Claude's job)"
    - "Replace domain-specific systems"
    - "Bundle as KERNL plugin (standalone MCP server)"
    - "Run as browser extension"

interfaces:
  - workspace: "Any MCP Client"
    relationship: "Universal automation provider"
    connection: "MCP protocol via Claude Desktop or API"
    data_flow: "Oktyv → Claude → Client application"
    
  - workspace: "KERNL"
    relationship: "Development tooling"
    connection: "Session management, file operations"
    data_flow: "KERNL manages Oktyv development"
    
  - workspace: "GREGORE"
    relationship: "Automation execution layer"
    connection: "GREGORE orchestrates, Oktyv executes"
    data_flow: "GREGORE → Oktyv (all 8 engines)"

key_decisions:
  - date: "2026-01-22"
    decision: "Standalone MCP server, not KERNL plugin"
    rationale: |
      - Single responsibility (automation only)
      - Easier to test in isolation
      - Large dependencies (Puppeteer ~300MB, multiple engines)
      - Usable beyond any single product
      - Simpler deployment and versioning
      
  - date: "2026-01-22"
    decision: "Puppeteer over Playwright"
    rationale: |
      - Simpler API for MCP use case
      - Smaller footprint
      - Better Node.js integration
      - Sufficient for current platforms
      
  - date: "2026-01-22"
    decision: "Cookie-based session persistence"
    rationale: |
      - User stays logged in across invocations
      - Mirrors real browser behavior
      - Respects platform security
      
  - date: "2026-01-24"
    decision: "8-engine complete product scope (added Parallel Execution)"
    rationale: |
      - All engines required for "universal automation layer"
      - MVP approach rejected (Option B Perfection philosophy)
      - Parallel execution enables real-world multi-task workflows
      - Build complete product, ship when ready
      
  - date: "2026-01-25"
    decision: "DAG-based parallel execution over simple concurrency"
    rationale: |
      - Dependency management required for real workflows
      - Variable substitution enables data flow between tasks
      - Level-based execution maximizes parallelism
      - Circular dependency detection prevents infinite loops
      - Production-grade with retry policies and timeout management

naming:
  etymology: |
    "Oktyv" combines "oct" (eight, suggesting completeness) with modern tech aesthetic.
    Represents complete automation across all domains with 8 engines.
  alternatives_rejected:
    - "Autopilot" (renamed from original concept)
    - "Fetch" (unicorn company $2.5B conflict)
    - "Invoke" (multiple established companies)
    - "Argus" (major real estate software $143M raised)
  availability: "Clean - zero conflicts found"

performance_targets:
  browser_engine:
    tool_latency: "<500ms (excluding browser render)"
    linkedin_search: "<3s for 10 results"
    job_detail_fetch: "<2s per job"
    memory_usage: "<500MB per browser instance"
    concurrent_sessions: "1-3 browsers"
    
  parallel_execution:
    dag_construction: "<1ms per task"
    variable_resolution: "<1ms per substitution"
    level_coordination: "<5ms per level"
    overhead: "<50ms for 10-task workflow"
    memory_per_task: "~50KB"
    speedup: "5x for 5 independent tasks, 3x for multi-platform searches"
    
  other_engines:
    api_latency: "<200ms per request"
    database_query: "<50ms per query"
    file_operations: "<100ms per operation"
    vault_operations: "<50ms per operation"

production_hardening:
  load_testing:
    - "Concurrent operation testing (500+ workers)"
    - "Latency tracking (P50, P95, P99 percentiles)"
    - "Memory usage monitoring"
    - "Throughput measurement (requests/second)"
    
  security_audit:
    - "28 comprehensive security checks"
    - "Encryption validation (AES-256-GCM)"
    - "SQL injection prevention"
    - "OAuth token security"
    - "Path traversal protection"
    - "Credential exposure scanning"
    - "Score: 95/100"
    
  performance_optimization:
    - "CPU profiling"
    - "Memory profiling"
    - "Latency benchmarking"
    - "Bottleneck identification"
    - "Caching strategies"
    - "Connection pooling"
    - "Operation batching"
    
  monitoring_metrics:
    - "Real-time metrics collection"
    - "Health check system"
    - "Alert threshold management"
    - "System resource tracking"
    - "Export capabilities"
    
  error_recovery:
    - "Connection failure recovery"
    - "Timeout handling"
    - "Retry logic validation"
    - "Circuit breaker testing"
    - "Graceful degradation"

build_plan:
  completed_phases:
    phase_1_browser_engine:
      status: "✅ COMPLETE"
      completion_date: "2026-01-22"
      
    phase_2_vault_engine:
      status: "✅ COMPLETE"
      completion_date: "2026-01-23"
      
    phase_3_api_engine:
      status: "✅ COMPLETE"
      completion_date: "2026-01-24"
      
    phase_4_database_engine:
      status: "✅ COMPLETE"
      completion_date: "2026-01-24"
      
    phase_5_email_engine:
      status: "✅ COMPLETE"
      completion_date: "2026-01-24"
      
    phase_6_file_engine:
      status: "✅ COMPLETE"
      completion_date: "2026-01-24"
      
    phase_7_cron_engine:
      status: "✅ COMPLETE"
      completion_date: "2026-01-24"
      
    phase_8_parallel_execution:
      status: "✅ COMPLETE"
      completion_date: "2026-01-25"
      
    phase_9_production_hardening:
      status: "✅ COMPLETE"
      completion_date: "2026-01-25"
  
  current_phase:
    name: "v1.1.0 Release - Production Ready"
    status: "✅ COMPLETE"
    deliverables:
      - "✅ All 8 engines implemented and tested"
      - "✅ 258 comprehensive tests (100% passing)"
      - "✅ Production hardening (load, security, performance, monitoring, recovery)"
      - "✅ Complete documentation"
      - "✅ CI/CD automation"
      - "✅ Professional README"
      
  future_enhancements:
    phase_10_advanced_features:
      status: "PLANNED"
      priority: "LOW"
      deliverables:
        - "Workflow templates and presets"
        - "Visual workflow builder"
        - "Enhanced monitoring dashboards"
        - "Plugin system for custom engines"
        - "Multi-region deployment support"

scope_agreement:
  complete_product:
    description: "8 complete engines with production hardening"
    engines:
      - "Browser Engine ✅"
      - "Vault Engine ✅"
      - "API Engine ✅"
      - "Database Engine ✅"
      - "Email Engine ✅"
      - "File Engine ✅"
      - "Cron Engine ✅"
      - "Parallel Execution Engine ✅"
    
  current_status: "8 of 8 engines complete (100%)"
  completion_criteria: "All 8 engines implemented, tested, documented, and production-ready"
  achieved: "2026-01-25"

meta:
  created: "2026-01-22T08:11:44Z"
  last_updated: "2026-01-29T19:30:00Z"
  author: "David Kirsch"
  workspace_id: "oktyv"
  workspace_group: "standalone"
  version_history:
    - "0.1.0-alpha.1: Initial browser engine"
    - "0.2.0-alpha.1: Browser engine complete + test infrastructure + CI/CD"
    - "0.3.0-alpha.1: Vault engine complete"
    - "0.4.0-alpha.1: API engine complete"
    - "0.5.0-alpha.1: Database engine complete"
    - "0.6.0-alpha.1: Email engine complete"
    - "0.7.0-alpha.1: File engine complete"
    - "1.0.0-alpha.1: Cron engine complete - all 7 core engines"
    - "1.0.0-beta.1: All 71 handlers implemented, 100% integration"
    - "1.0.0: Production ready - load testing, security audit, performance optimization, monitoring, error recovery"
    - "1.1.0: Parallel Execution Engine - DAG-based concurrent task orchestration"
